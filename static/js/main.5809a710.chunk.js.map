{"version":3,"sources":["config.js","api/index.js","component/NavBar.js","component/ImageSimple.js","page/ImageList.js","page/Home.js","page/Login.js","page/Signup.js","component/Image.js","component/UploadImage.js","App.js","index.js"],"names":["config","get_data","url","a","fetch","data","json","data_json","get_data_token","token","method","headers","post_data","body","JSON","stringify","raw_data","json_data","post_data_token","is_json","body_data","delete_data","result","NavBar","props","is_authenticated","logout","className","to","style","onClick","ImageSimple","arr","image","posted_by","_id","src","contentType","btoa","reduce","byte","String","fromCharCode","alt","width","height","ImageList","images_data","user","images","username","map","Home","users","Object","keys","user_id","Login","password","text_input_change","login","htmlFor","type","name","id","placeholder","value","onChange","Signup","signup","withRouter","cur_user","delete_image","useParams","userId","imageId","filter","created","title","err","handle_upload","event","history","push","upload_image","ref","App","target","setState","preventDefault","state","current_user","form_data","FormData","append","current","files","host","fetch_all_users","fetch_all_images","sessionStorage","getItem","delete_an_image","filtered_result","signup_or_login","length","alert","is_new","setItem","console","log","removeItem","React","createRef","this","exact","path","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qPAKeA,EALF,CACT,KAAQ,+CCDRC,EAAQ,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,sEACMC,MAAMF,GADZ,cACPG,EADO,gBAEWA,EAAKC,OAFhB,cAEPC,EAFO,yBAGJA,GAHI,2CAAH,sDAMRC,EAAc,uCAAG,WAAON,EAAKO,GAAZ,iBAAAN,EAAA,sEACAC,MAAOF,EAAK,CACzBQ,OAAQ,MACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAiB,UAAYF,KANpB,cACbJ,EADa,gBASKA,EAAKC,OATV,cASbC,EATa,yBAUVA,GAVU,2CAAH,wDAadK,EAAS,uCAAG,WAAOV,EAAKG,GAAZ,iBAAAF,EAAA,sEACSC,MAAMF,EAAK,CAC5BQ,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBE,KAAMC,KAAKC,UAAUV,KANb,cACRW,EADQ,gBAQUA,EAASV,OARnB,cAQRW,EARQ,yBASLA,GATK,2CAAH,wDAYTC,EAAe,uCAAG,WAAOhB,EAAKG,EAAMI,EAAOU,GAAzB,mBAAAhB,EAAA,6DAGdiB,EADAD,EACYL,KAAKC,UAAUV,GAEfA,EALE,SAQGD,MAAMF,EAAK,CAC5BQ,OAAQ,OACRC,QAAS,CACL,OAAU,mBACV,cAAiB,UAAYF,GAEjCI,KAAMO,IAdQ,cAQdJ,EARc,gBAgBIA,EAASV,OAhBb,cAgBdW,EAhBc,yBAiBXA,GAjBW,2CAAH,4DAoBfI,EAAW,uCAAG,WAAOnB,EAAKO,GAAZ,eAAAN,EAAA,sEACKC,MAAMF,EAAK,CAC1BQ,OAAQ,SACRC,QAAS,CACL,cAAiB,UAAYF,EAC7B,eAAgB,sBALV,cACVa,EADU,gBAQRA,EAAOhB,OARC,2CAAH,wDCjDA,SAASiB,EAAOC,GAAQ,IAC7BC,EAA6BD,EAA7BC,iBAAkBC,EAAWF,EAAXE,OACxB,OAAO,8BACH,sBAAKC,UAAU,iDAAf,UACI,cAAC,IAAD,CAAMA,UAAU,yBAAyBC,GAAG,QAA5C,uBAEA,oBAAID,UAAU,kBAAd,SACI,oBAAIA,UAAU,kBAAd,SACI,cAAC,IAAD,CAAMA,UAAU,WAAWC,GAAG,QAA9B,sBAIR,qBAAKC,MAAO,CAAE,SAAY,WAAY,MAAS,QAA/C,SACI,qBAAIF,UAAU,aAAd,UACI,oBAAIA,UAAU,kBAAd,SACKF,GAAoB,cAAC,IAAD,CAAME,UAAU,WAAWC,GAAG,UAA9B,sBAEzB,oBAAID,UAAU,kBAAd,SACKF,EAAmB,cAAC,IAAD,CAAME,UAAU,WAAWC,GAAG,QAA9B,kBAChB,cAAC,IAAD,CAAMD,UAAU,WAAWC,GAAG,UAA9B,sBAER,oBAAID,UAAU,kBAAd,SACKF,EAAmB,cAAC,IAAD,CAAME,UAAU,WAAWG,QAASJ,EAAQE,GAAG,IAA/C,oBAChB,cAAC,IAAD,CAAMD,UAAU,WAAWC,GAAG,SAA9B,+BCjBb,SAASG,EAAYP,GAAQ,IAN1BQ,EAORC,EAAST,EAATS,MACN,OAAO,qBAAKN,UAAU,OAAf,SACH,cAAC,IAAD,CAAMC,GAAE,iBAAYK,EAAMC,UAAUC,IAA5B,YAAmCF,EAAME,KAAjD,SACI,qBAAKC,IAAG,eAAUH,EAAMA,MAAMI,YAAtB,oBAVFL,EAUuDC,EAAMA,MAAM5B,KAAKA,KAT/EiC,KACHN,EAAIO,QAAO,SAAClC,EAAMmC,GAAP,OAAgBnC,EAAOoC,OAAOC,aAAaF,KAAO,OAQ8BG,IAAI,GACvFC,MAAM,SAASC,OAAO,eCXvB,SAASC,EAAUtB,GAAQ,IAGlCuB,EAFEC,EAAiBxB,EAAjBwB,KAAMC,EAAWzB,EAAXyB,OAGRC,EAAS,GAYb,OAXKF,GAASC,GAAWA,EAAOE,KAG5BJ,EAAcE,EAAOE,KAAI,SAAClB,GACtB,OAAO,qBAAKN,UAAU,QAAf,SACH,cAACI,EAAD,CAA6BE,MAAOA,GAAlBA,EAAME,MADOF,EAAME,QAI7Ce,EAAWF,EAAKE,UAPhBH,EAAc,wBAUX,sBAAKpB,UAAU,iBAAf,UACH,6BAAKuB,IACL,qBAAKvB,UAAU,MAAf,SACKoB,OCnBE,SAASK,EAAK5B,GAAQ,IAG7BnB,EAFCgD,EAAiB7B,EAAjB6B,MAAOJ,EAAUzB,EAAVyB,OAWZ,OALI5C,EAHCgD,GAAUJ,GAAWK,OAAOC,KAAKN,GAAQE,IAGnCG,OAAOC,KAAKF,GAAOF,KAAI,SAACK,GAC3B,OAAO,cAACV,EAAD,CAAyBE,KAAMK,EAAMG,GAAUP,OAAQA,EAAOO,IAA9CA,MAHpB,wBAOJ,qBAAK7B,UAAU,OAAf,SACFtB,ICbM,SAASoD,EAAMjC,GAAQ,IAC7B0B,EAAgD1B,EAAhD0B,SAAUQ,EAAsClC,EAAtCkC,SAAUC,EAA4BnC,EAA5BmC,kBAAmBC,EAASpC,EAAToC,MAC5C,OAAO,qBAAKjC,UAAU,OAAf,SACH,uBAAMA,UAAU,cAAhB,UACI,sBAAKA,UAAU,aAAf,UACI,uBAAOkC,QAAQ,WAAf,sBACA,uBAAOC,KAAK,OAAOnC,UAAU,eACtBoC,KAAK,WAAWC,GAAG,WAAWC,YAAY,cAC1CC,MAAOhB,EAAUiB,SAAUR,OAEtC,sBAAKhC,UAAU,aAAf,UACI,uBAAOkC,QAAQ,WAAf,sBACA,uBAAOC,KAAK,WAAWnC,UAAU,eAC1BqC,GAAG,WAAWD,KAAK,WACnBG,MAAOR,EAAUS,SAAUR,IAClC,wBAAOhC,UAAU,uBAAjB,oCAA+D,cAAC,IAAD,CAAMC,GAAG,UAAT,0BAEnE,wBAAQkC,KAAK,SAASnC,UAAU,kBAAkBG,QAAS8B,EAA3D,wBCjBG,SAASQ,EAAO5C,GAAQ,IAC9B0B,EAAiD1B,EAAjD0B,SAAUQ,EAAuClC,EAAvCkC,SAAUC,EAA6BnC,EAA7BmC,kBAAmBU,EAAU7C,EAAV6C,OAC5C,OAAO,qBAAK1C,UAAU,OAAf,SACH,uBAAMA,UAAU,cAAhB,UACI,sBAAKA,UAAU,aAAf,UACI,uBAAOkC,QAAQ,WAAf,sBACA,uBAAOC,KAAK,OAAOnC,UAAU,eACtBoC,KAAK,WAAWC,GAAG,WAAWC,YAAY,cAC1CC,MAAOhB,EAAUiB,SAAUR,OAEtC,sBAAKhC,UAAU,aAAf,UACI,uBAAOkC,QAAQ,WAAf,sBACA,uBAAOC,KAAK,WAAWnC,UAAU,eAC1BqC,GAAG,WAAWD,KAAK,WACnBG,MAAOR,EAAUS,SAAUR,IAClC,wBAAOhC,UAAU,uBAAjB,oCAA+D,cAAC,IAAD,CAAMC,GAAG,SAAT,yBAEnE,wBAAQkC,KAAK,SAASnC,UAAU,kBAAkBG,QAASuC,EAA3D,yBCuBGC,mBAlCf,SAAe9C,GAAQ,IANLQ,EAORiB,EAA0CzB,EAA1CyB,OAAQI,EAAkC7B,EAAlC6B,MAAOkB,EAA2B/C,EAA3B+C,SAAUC,EAAiBhD,EAAjBgD,aADb,EAEQC,cAApBC,EAFY,EAEZA,OAAQC,EAFI,EAEJA,QAEd,IACI,IAAI3B,EAAOK,EAAMqB,GACbzC,EAAQgB,EAAOyB,GAAQE,QAAO,SAAC3C,GAC/B,OAAOA,EAAME,MAAQwC,KAKzB,OAFA1C,EAAQA,EAAM,GAEP,qBAAKN,UAAU,OAAf,SACH,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,QAAf,SACI,qBAAKS,IAAG,eAAUH,EAAMA,MAAMI,YAAtB,oBArBVL,EAqB+DC,EAAMA,MAAM5B,KAAKA,KApBvFiC,KACHN,EAAIO,QAAO,SAAClC,EAAMmC,GAAP,OAAgBnC,EAAOoC,OAAOC,aAAaF,KAAO,OAmBsCG,IAAI,GACvFC,MAAM,UAAUC,OAAO,aAE/B,sBAAKlB,UAAU,QAAf,UACI,qBAAKE,MAAO,CAAE,WAAc,QAA5B,SAAuCmB,EAAKE,WAC5C,qBAAKrB,MAAO,CAAE,MAAS,QAAvB,oBAAsCI,EAAM4C,WAC5C,qBAAKlD,UAAU,OAAf,SAAuBM,EAAM6C,QAC7B,qBAAKnD,UAAU,OAAf,SACKM,EAAMC,UAAUC,MAAQoC,GAAY,wBAAQ5C,UAAU,iBACnDG,QAAS,kBAAM0C,EAAaE,EAAQC,IADH,8BAMvD,MAAOI,GACL,OAAO,cAAC,IAAD,CAAUnD,GAAG,cCpCxBoD,EAAa,uCAAG,WAAOC,EAAOC,EAASxE,GAAvB,SAAAP,EAAA,+EAENO,EAAOuE,GAFD,6EAMZC,EAAQC,KAAK,SAND,0EAAH,0DA0CFb,mBAhCf,SAAqB9C,GAAQ,IACpBsC,EAAgEtC,EAAhEsC,KAAMgB,EAA0DtD,EAA1DsD,MAAO7C,EAAmDT,EAAnDS,MAAO0B,EAA4CnC,EAA5CmC,kBAAmByB,EAAyB5D,EAAzB4D,aAAcF,EAAW1D,EAAX0D,QAE1D,OAAO,qBAAKvD,UAAU,OAAf,SACH,uBAAMA,UAAU,cAAhB,UACI,sBAAKA,UAAU,aAAf,UACI,uBAAOkC,QAAQ,QAAf,mBACA,uBAAOC,KAAK,OAAOnC,UAAU,eACzBoC,KAAK,QAAQC,GAAG,QAAQC,YAAY,oBACpCC,MAAOY,EAAOX,SAAUR,OAIhC,sBAAKhC,UAAU,aAAf,UACI,uBAAOkC,QAAQ,OAAf,0BACA,yBAAQlC,UAAU,eAAeqC,GAAG,OAAOD,KAAK,OAC5CG,MAAOJ,EAAMK,SAAUR,EAD3B,UAEI,wBAAQO,MAAM,SAAd,oBACA,wBAAQA,MAAM,UAAd,2BAIR,sBAAKvC,UAAU,aAAf,UACI,uBAAOkC,QAAQ,QAAf,mBACA,uBAAOC,KAAK,OAAOnC,UAAU,oBAAoBqC,GAAG,QAAQD,KAAK,QAAQsB,IAAKpD,OAGlF,wBAAQ6B,KAAK,SAASnC,UAAU,kBAAkBG,QAAS,SAACmD,GAAD,OAAWD,EAAcC,EAAOC,EAASE,IAApG,4BCtBSE,E,kDACjB,WAAY9D,GAAQ,IAAD,8BACf,cAAMA,IAkCVmC,kBAAoB,SAACsB,GACjB,IAAIM,EAASN,EAAMM,OACnB,EAAKC,SAAL,eACKD,EAAOxB,KAAOwB,EAAOrB,SAtCX,EA0CnBkB,aA1CmB,uCA0CJ,WAAOH,GAAP,iCAAA9E,EAAA,6DACX8E,EAAMQ,iBADK,EAE+C,EAAKC,MAAzDZ,EAFK,EAELA,MAAOhB,EAFF,EAEEA,KAAM7B,EAFR,EAEQA,MAAOgB,EAFf,EAEeA,OAAQ0C,EAFvB,EAEuBA,aAAclF,EAFrC,EAEqCA,OAE1CmF,EAAY,IAAIC,UACZC,OAAO,QAAShB,GAC1Bc,EAAUE,OAAO,SAAUhC,GAC3B8B,EAAUE,OAAO,QAAS7D,EAAM8D,QAAQC,MAAM,IAE1C9F,EATO,UASEF,EAAOiG,KATT,sBAS2BN,GAT3B,SAUQzE,EAAgBhB,EAAK0F,EAAWnF,GAAO,GAV/C,OAUPa,EAVO,OAWX2B,EAAO0C,GAAcR,KAAK7D,GAC1B,EAAKkE,SAAS,CAAEvC,WAZL,4CA1CI,wDAyDnBiD,gBAzDmB,sBAyDD,wCAAA/F,EAAA,6DACVD,EADU,UACDF,EAAOiG,KADN,kBAEKhG,EAASC,GAFd,OAEVoB,EAFU,OAIV+B,EAAQ,GAJE,cAKG/B,GALH,IAKd,2BAAS0B,EAAgB,QACjBQ,EAAUR,EAAKb,IACnBkB,EAAMG,GAAWR,EAPP,8BASd,EAAKwC,SAAS,CAAEnC,UATF,2CAzDC,EAqEnB8C,iBArEmB,sBAqEA,kDAAAhG,EAAA,yDACTkD,EAAU,EAAKqC,MAAfrC,MACF5C,EAAQ2F,eAAeC,QAAQ,SAE/BnG,EAJW,UAIFF,EAAOiG,KAJL,WAKXhD,EAAS,IACTxC,EANW,uBAOS6C,OAAOC,KAAKF,GAPrB,gDAOFG,EAPE,eAQYhD,EAAeN,EAAMsD,EAAS/C,GAR1C,QAQHa,EARG,OASP2B,EAAOO,GAAWlC,EATX,iEAYSgC,OAAOC,KAAKF,GAZrB,iDAYFG,EAZE,eAaYvD,EAASC,EAAMsD,GAb3B,QAaHlC,EAbG,OAcP2B,EAAOO,GAAWlC,EAdX,oCAkBf,EAAKkE,SAAS,CAAEvC,WAlBD,4CArEA,EA0FnBqD,gBA1FmB,uCA0FD,WAAO5B,EAAQC,GAAf,uBAAAxE,EAAA,+DACU,EAAKuF,MAAvBzC,EADQ,EACRA,OAAQxC,EADA,EACAA,MACVP,EAFU,UAEDF,EAAOiG,KAFN,kBAEoBtB,GAFpB,SAGRtD,EAAYnB,EAAKO,GAHT,OAKV8F,EAAkBtD,EAAOyB,GAAQE,QAAO,SAAC3C,GACzC,OAAOA,EAAME,MAAQwC,KAEzB1B,EAAOyB,GAAU6B,EACjB,EAAKf,SAAS,CAAEvC,WATF,2CA1FC,0DAsGnBuD,gBAtGmB,uCAsGD,WAAOzC,GAAP,yBAAA5D,EAAA,2DACe,EAAKuF,MAA5BxC,EADQ,EACRA,SAAUQ,EADF,EACEA,SACQ,IAApBR,EAASuD,QAAoC,IAApB/C,EAAS+C,OAFxB,wDAMVvG,EANU,UAMDF,EAAOiG,KANN,YAMclC,GACxB1D,EAAO,CACP,SAAY6C,EACZ,SAAYQ,GATF,SAYK9C,EACfV,EACAG,GAdU,cAYViB,EAZU,yBAgBPA,GAhBO,2CAtGC,wDAyHnB+C,OAzHmB,uCAyHV,WAAOY,GAAP,eAAA9E,EAAA,6DACL8E,EAAMQ,iBADD,SAGc,EAAKe,gBAAgB,QAHnC,WAGDlF,EAHC,UAISA,EAAM,MAJf,uBAKDoF,MAAM,iBALL,0BASL,EAAKlB,SAAS,CACVmB,QAAQ,IAVP,2CAzHU,wDAuInB/C,MAvImB,uCAuIX,WAAOqB,GAAP,mBAAA9E,EAAA,6DACJ8E,EAAMQ,iBADF,SAGe,EAAKe,gBAAgB,UAHpC,WAGAlF,EAHA,UAKWA,EAAM,MALjB,uBAMAoF,MAAM,gBANN,iCAWAjG,EAAQa,EAAOb,MACfkF,EAAerE,EAAO0B,KAAKb,IAE/BiE,eAAeQ,QAAQ,QAASnG,GAChC2F,eAAeQ,QAAQ,OAAQjB,GAE/B,EAAKH,SAAS,CACV/E,QACAkF,eACAlE,kBAAkB,IApBlB,UAwBE,EAAKyE,kBAxBP,yBAyBE,EAAKC,mBAzBP,QA0BJU,QAAQC,IAAI,EAAKpB,OA1Bb,4CAvIW,wDAoKnBhE,OAAS,SAACuD,GACNA,EAAMQ,iBACFW,eAAeC,QAAQ,WACvBD,eAAeW,WAAW,SAC1BX,eAAeW,WAAW,SAE9B,EAAKvB,SAAS,CACV/E,MAAO,GACPgB,kBAAkB,EAClBkE,aAAc,GACdtC,MAAO,GACPJ,OAAQ,KAGZ4D,QAAQC,IAAI,EAAKpB,QAhLjB,EAAKA,MAAQ,CACTxC,SAAU,GACVQ,SAAU,GACVjC,kBAAkB,EAClBkF,QAAQ,EACRlG,MAAO,GACPkF,aAAc,GACdtC,MAAO,GACPJ,OAAQ,GACRhB,MAAO+E,IAAMC,YACbnD,KAAM,SACNgB,MAAO,IAbI,E,iLAmBXsB,eAAeC,QAAQ,UACvBa,KAAK1B,SAAS,CACV/D,kBAAkB,EAClBhB,MAAO2F,eAAeC,QAAQ,WAIlCD,eAAeC,QAAQ,SACvBa,KAAK1B,SAAS,CACVG,aAAcS,eAAeC,QAAQ,U,SAGvCa,KAAKhB,kB,uBACLgB,KAAKf,mB,qIAqJL,IAAD,EAEmDe,KAAKxB,MADvDxC,EADD,EACCA,SAAUQ,EADX,EACWA,SAAUjC,EADrB,EACqBA,iBAAkBkF,EADvC,EACuCA,OACxCtD,EAFC,EAEDA,MAAOJ,EAFN,EAEMA,OAAQ0C,EAFd,EAEcA,aAAc7B,EAF5B,EAE4BA,KAAM7B,EAFlC,EAEkCA,MAAO6C,EAFzC,EAEyCA,MAE9C,OAAO,sBAAKnD,UAAU,MAAf,UACH,8BACI,cAACJ,EAAD,CAAQE,iBAAkBA,EAAkBC,OAAQwF,KAAKxF,WAE7D,qBAAKC,UAAU,kBAAf,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOwF,OAAK,EAACC,KAAM,CAAC,IAAK,UAAzB,SACK3F,EAAmB,cAAC,IAAD,CAAUG,GAAG,UAC7B,cAAC6B,EAAD,CAAOP,SAAUA,EAAUQ,SAAUA,EACjCC,kBAAmBuD,KAAKvD,kBACxBC,MAAOsD,KAAKtD,UAExB,cAAC,IAAD,CAAOwD,KAAK,QAAZ,SACM3F,EACE,cAAC2B,EAAD,CAAMC,MAAOA,EAAOJ,OAAQA,IADX,cAAC,IAAD,CAAUrB,GAAG,aAGtC,cAAC,IAAD,CAAOwF,KAAK,UAAZ,SACMT,EACE,cAACvC,EAAD,CAAQlB,SAAUA,EAAUQ,SAAUA,EAClCC,kBAAmBuD,KAAKvD,kBACxBU,OAAQ6C,KAAK7C,SAHV,cAAC,IAAD,CAAUzC,GAAG,aAK5B,cAAC,IAAD,CAAOwF,KAAK,QAAZ,SACM3F,EAA8C,cAACqB,EAAD,CAAWE,KAAMK,EAAMsC,GAAe1C,OAAQA,EAAO0C,KAAhF,cAAC,IAAD,CAAU/D,GAAG,aAEtC,cAAC,IAAD,CAAOwF,KAAK,0BAAZ,SACM3F,EACE,cAAC,EAAD,CAAO4B,MAAOA,EAAOJ,OAAQA,EAAQsB,SAAUoB,EAC3CnB,aAAc0C,KAAKZ,kBAFN,cAAC,IAAD,CAAU1E,GAAG,aAItC,cAAC,IAAD,CAAOwF,KAAK,UAAZ,SACM3F,EACE,cAAC,EAAD,CAAaqC,KAAMA,EAAM7B,MAAOA,EAAO6C,MAAOA,EAC1CnB,kBAAmBuD,KAAKvD,kBACxByB,aAAc8B,KAAK9B,eAHN,cAAC,IAAD,CAAUxD,GAAG,yB,GAzNzByF,aCXjCC,IAASC,OACL,cAAC,IAAD,UACI,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,QAIRC,SAASC,eAAe,W","file":"static/js/main.5809a710.chunk.js","sourcesContent":["let config = {\r\n    \"host\": \"https://imagebook-backend.herokuapp.com/api\"\r\n}\r\n\r\n\r\nexport default config ","let get_data = async (url) => {\r\n    let data = await fetch(url)\r\n    let data_json = await data.json()\r\n    return data_json\r\n}\r\n\r\nlet get_data_token = async (url, token) => {\r\n    let data = await fetch (url, {\r\n        method: \"GET\", \r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + token \r\n        }\r\n    })\r\n    let data_json = await data.json()\r\n    return data_json \r\n}\r\n\r\nlet post_data = async (url, data) => {\r\n    let raw_data = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n    let json_data = await raw_data.json()\r\n    return json_data\r\n}\r\n\r\nlet post_data_token = async (url, data, token, is_json) => {\r\n    let body_data\r\n    if (is_json){\r\n        body_data = JSON.stringify(data)\r\n    }else{\r\n        body_data = data \r\n    }\r\n\r\n    let raw_data = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Authorization': 'Bearer ' + token \r\n        },\r\n        body: body_data\r\n    })\r\n    let json_data = await raw_data.json()\r\n    return json_data\r\n}\r\n\r\nlet delete_data = async (url, token) => {\r\n    let result = await fetch(url, {\r\n        method: 'DELETE', \r\n        headers: { \r\n            \"Authorization\": \"Bearer \" + token,\r\n            'Content-Type': 'application/json' \r\n        }\r\n    })\r\n    await result.json()\r\n}\r\n\r\nexport {get_data, post_data, post_data_token, get_data_token, delete_data}","import { Link } from 'react-router-dom'\r\n\r\nexport default function NavBar(props) {\r\n    let { is_authenticated, logout } = props\r\n    return <div>\r\n        <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\r\n            <Link className=\"navbar-brand ml-4 mb-1\" to=\"/home\">Imagebook</Link>\r\n\r\n            <ul className=\"navbar-nav ml-4\">\r\n                <li className=\"nav-item active\">\r\n                    <Link className=\"nav-link\" to=\"/home\">Home</Link>\r\n                </li>\r\n            </ul>\r\n\r\n            <div style={{ \"position\": \"absolute\", \"right\": \"3rem\" }}>\r\n                <ul className=\"navbar-nav\">\r\n                    <li className=\"nav-item active\">\r\n                        {is_authenticated && <Link className=\"nav-link\" to=\"/upload\">Upload</Link>}\r\n                    </li>\r\n                    <li className=\"nav-item active\">\r\n                        {is_authenticated ? <Link className=\"nav-link\" to=\"/repo\">Repo</Link> :\r\n                            <Link className=\"nav-link\" to=\"/signup\">Signup</Link>}\r\n                    </li>\r\n                    <li className=\"nav-item active\">\r\n                        {is_authenticated ? <Link className=\"nav-link\" onClick={logout} to=\"/\">Logout</Link> :\r\n                            <Link className=\"nav-link\" to=\"/login\">Login</Link>}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n        </nav>\r\n    </div>\r\n}","import { Link } from 'react-router-dom'\r\n\r\nfunction toBase64(arr) {\r\n    return btoa(\r\n        arr.reduce((data, byte) => data + String.fromCharCode(byte), '')\r\n    )\r\n}\r\n\r\nexport default function ImageSimple(props) {\r\n    let { image} = props\r\n    return <div className=\"mb-2\">\r\n        <Link to={`/image/${image.posted_by._id}/${image._id}`}>\r\n            <img src={`data:${image.image.contentType};base64,${toBase64(image.image.data.data)}`} alt=\"\"\r\n                width=\"350rem\" height=\"200rem\"></img>\r\n        </Link>\r\n    </div>\r\n}","import ImageSimple from '../component/ImageSimple'\r\n\r\nexport default function ImageList(props) {\r\n    let { user, images } = props\r\n\r\n    let images_data\r\n    let username=\"\"\r\n    if (!user || !images || !images.map) {\r\n        images_data = <div></div>\r\n    } else {\r\n        images_data = images.map((image) => {\r\n            return <div className=\"col-3\" key={image._id}>\r\n                <ImageSimple key={image._id} image={image}/>\r\n            </div>\r\n        })\r\n        username = user.username\r\n    }\r\n\r\n    return <div className=\"mt-4 mb-4 ml-4\">\r\n        <h3>{username}</h3>\r\n        <div className=\"row\">\r\n            {images_data}\r\n        </div>\r\n    </div>\r\n}","import ImageList from './ImageList'\r\n\r\nexport default function Home(props) {\r\n    let {users, images} = props\r\n\r\n    let data  \r\n    if (!users || !images || !Object.keys(images).map){\r\n        data = <div></div>\r\n    }else{\r\n        data = Object.keys(users).map((user_id) => {\r\n            return <ImageList key={user_id} user={users[user_id]} images={images[user_id]}/>\r\n        })\r\n    }\r\n\r\n    return <div className=\"mt-3\">\r\n        {data}\r\n    </div>\r\n}","import {Link} from 'react-router-dom'\r\n\r\nexport default function Login(props) {\r\n    let {username, password, text_input_change, login} = props \r\n    return <div className=\"mt-5\">\r\n        <form className=\"w-25 m-auto\">\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <input type=\"text\" className=\"form-control\" \r\n                       name=\"username\" id=\"username\" placeholder=\"Bruce Wayne\"\r\n                       value={username} onChange={text_input_change}></input>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input type=\"password\" className=\"form-control\" \r\n                       id=\"password\" name=\"password\"\r\n                       value={password} onChange={text_input_change}></input>\r\n                <small className=\"form-text text-muted\">Don't have an account? <Link to=\"/signup\">Signup</Link></small>\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\" onClick={login}>Login</button>\r\n        </form>\r\n    </div>\r\n}","import { Link } from 'react-router-dom'\r\n\r\nexport default function Signup(props) {\r\n    let {username, password, text_input_change, signup} = props \r\n    return <div className=\"mt-5\">\r\n        <form className=\"w-25 m-auto\">\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <input type=\"text\" className=\"form-control\" \r\n                       name=\"username\" id=\"username\" placeholder=\"Bruce Wayne\"\r\n                       value={username} onChange={text_input_change}></input>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input type=\"password\" className=\"form-control\" \r\n                       id=\"password\" name=\"password\"\r\n                       value={password} onChange={text_input_change}></input>\r\n                <small className=\"form-text text-muted\">Don't have an account? <Link to=\"/login\">Login</Link></small>\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\" onClick={signup}>Signup</button>\r\n        </form>\r\n    </div>\r\n}","import { useParams, withRouter, Redirect } from 'react-router-dom'\r\n\r\nfunction toBase64(arr) {\r\n    return btoa(\r\n        arr.reduce((data, byte) => data + String.fromCharCode(byte), '')\r\n    )\r\n}\r\n\r\nfunction Image(props) {\r\n    let { images, users, cur_user, delete_image } = props\r\n    let { userId, imageId } = useParams()\r\n\r\n    try {\r\n        let user = users[userId]\r\n        let image = images[userId].filter((image) => {\r\n            return image._id === imageId\r\n        })\r\n\r\n        image = image[0]\r\n\r\n        return <div className=\"mt-3\">\r\n            <div className=\"row\">\r\n                <div className=\"col-8\">\r\n                    <img src={`data:${image.image.contentType};base64,${toBase64(image.image.data.data)}`} alt=\"\"\r\n                        width=\"1000rem\" height=\"600rem\"></img>\r\n                </div>\r\n                <div className=\"col-4\">\r\n                    <div style={{ \"fontWeight\": \"bold\" }}>{user.username}</div>\r\n                    <div style={{ \"color\": \"gray\" }}>{`@${image.created}`}</div>\r\n                    <div className=\"mt-3\">{image.title}</div>\r\n                    <div className=\"mt-3\">\r\n                        {image.posted_by._id === cur_user && <button className=\"btn btn-danger\"\r\n                            onClick={() => delete_image(userId, imageId)}>Delete</button>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    } catch (err) {\r\n        return <Redirect to=\"/repo\" />\r\n    }\r\n}\r\n\r\nexport default withRouter(Image)","import {withRouter} from 'react-router-dom'\r\n\r\nlet handle_upload = async (event, history, method) => {\r\n    try {\r\n        await method(event)\r\n    }catch(err){\r\n\r\n    }finally{\r\n        history.push('/repo')\r\n    }\r\n}\r\n\r\nfunction UploadImage(props) {\r\n    let {type, title, image, text_input_change, upload_image, history} = props\r\n\r\n    return <div className=\"mt-5\">\r\n        <form className=\"w-25 m-auto\">\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input type=\"text\" className=\"form-control\"\r\n                    name=\"title\" id=\"title\" placeholder=\"A beautiful image\"\r\n                    value={title} onChange={text_input_change}\r\n                ></input>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"type\">Image Status</label>\r\n                <select className=\"form-control\" id=\"type\" name=\"type\"\r\n                    value={type} onChange={text_input_change}>\r\n                    <option value=\"public\">public</option>\r\n                    <option value=\"private\">private</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"image\">Image</label>\r\n                <input type=\"file\" className=\"form-control-file\" id=\"image\" name=\"image\" ref={image}></input>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-primary\" onClick={(event) => handle_upload(event, history, upload_image)}>Upload</button>\r\n        </form>\r\n    </div>\r\n}\r\n\r\nexport default withRouter(UploadImage)","import 'bootstrap/dist/css/bootstrap.min.css'\n\nimport React, { Component } from 'react'\nimport { Route, Switch, Redirect } from 'react-router-dom'\n\nimport config from './config'\nimport { get_data, post_data, post_data_token, get_data_token, delete_data } from './api/index'\n\nimport NavBar from './component/NavBar'\nimport Home from './page/Home'\nimport Login from './page/Login'\nimport Signup from './page/Signup'\nimport ImageList from './page/ImageList'\nimport Image from './component/Image'\nimport UploadImage from './component/UploadImage'\n\n\nexport default class App extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            is_authenticated: false,\n            is_new: true,\n            token: '',\n            current_user: \"\",\n            users: {},\n            images: {},\n            image: React.createRef(),\n            type: \"public\",\n            title: \"\"\n        }\n    }\n\n    async componentDidMount() {\n        // get token on session storage if any\n        if (sessionStorage.getItem(\"token\")) {\n            this.setState({\n                is_authenticated: true,\n                token: sessionStorage.getItem(\"token\")\n            })\n        }\n\n        if (sessionStorage.getItem(\"user\")) {\n            this.setState({\n                current_user: sessionStorage.getItem(\"user\")\n            })\n        }\n        await this.fetch_all_users()\n        await this.fetch_all_images()\n    }\n\n    text_input_change = (event) => {\n        let target = event.target\n        this.setState({\n            [target.name]: target.value\n        })\n    }\n\n    upload_image = async (event) => {\n        event.preventDefault()\n        let { title, type, image, images, current_user, token } = this.state\n\n        const form_data = new FormData()\n        form_data.append(\"title\", title)\n        form_data.append(\"status\", type)\n        form_data.append(\"image\", image.current.files[0])\n\n        let url = `${config.host}/image/new/${current_user}`\n        let result = await post_data_token(url, form_data, token, false)\n        images[current_user].push(result)\n        this.setState({ images })\n    }\n\n    fetch_all_users = async () => {\n        let url = `${config.host}/user`\n        let result = await get_data(url)\n\n        let users = {}\n        for (let user of result) {\n            let user_id = user._id\n            users[user_id] = user\n        }\n        this.setState({ users })\n    }\n\n    fetch_all_images = async () => {\n        let { users } = this.state\n        let token = sessionStorage.getItem('token')\n\n        let url = `${config.host}/image/`\n        let images = {}\n        if (token) {\n            for (let user_id of Object.keys(users)) {\n                let result = await get_data_token(url + user_id, token)\n                images[user_id] = result\n            }\n        } else {\n            for (let user_id of Object.keys(users)) {\n                let result = await get_data(url + user_id)\n                images[user_id] = result\n            }\n        }\n\n        this.setState({ images })\n    }\n\n    delete_an_image = async (userId, imageId) => {\n        let { images, token } = this.state\n        let url = `${config.host}/image/${imageId}`\n        await delete_data(url, token)\n\n        let filtered_result = images[userId].filter((image) => {\n            return image._id !== imageId\n        })\n        images[userId] = filtered_result\n        this.setState({ images })\n    }\n\n    signup_or_login = async (name) => {\n        let { username, password } = this.state\n        if (username.length === 0 || password.length === 0) {\n            return\n        }\n\n        let url = `${config.host}/${name}`\n        let data = {\n            \"username\": username,\n            \"password\": password\n        }\n\n        let result = await post_data(\n            url,\n            data\n        )\n        return result\n    }\n\n    signup = async (event) => {\n        event.preventDefault()\n\n        let result = await this.signup_or_login(\"user\")\n        if(!result || result[\"error\"]){\n            alert(\"Signup failed\")\n            return \n        }\n\n        this.setState({\n            is_new: false\n        })\n    }\n\n    login = async (event) => {\n        event.preventDefault()\n\n        let result = await this.signup_or_login(\"signin\")\n\n        if (!result || result[\"error\"]){\n            alert(\"Login failed\")\n            return \n        }\n\n        // save token and set is_authenticated\n        let token = result.token\n        let current_user = result.user._id\n\n        sessionStorage.setItem(\"token\", token)\n        sessionStorage.setItem(\"user\", current_user)\n\n        this.setState({\n            token,\n            current_user,\n            is_authenticated: true\n        })\n\n        // fetch all user and their images\n        await this.fetch_all_users()\n        await this.fetch_all_images()\n        console.log(this.state)\n    }\n\n    logout = (event) => {\n        event.preventDefault()\n        if (sessionStorage.getItem('token')) {\n            sessionStorage.removeItem('token')\n            sessionStorage.removeItem('user')\n        }\n        this.setState({\n            token: '',\n            is_authenticated: false,\n            current_user: '',\n            users: {},\n            images: {}\n        })\n\n        console.log(this.state)\n    }\n\n    render() {\n        let { username, password, is_authenticated, is_new,\n            users, images, current_user, type, image, title } = this.state\n\n        return <div className=\"App\">\n            <div>\n                <NavBar is_authenticated={is_authenticated} logout={this.logout} />\n            </div>\n            <div className=\"container-fluid\">\n                <Switch>\n                    <Route exact path={[\"/\", \"/login\"]}>\n                        {is_authenticated ? <Redirect to=\"/repo\" /> :\n                            <Login username={username} password={password}\n                                text_input_change={this.text_input_change}\n                                login={this.login} />}\n                    </Route>\n                    <Route path=\"/home\">\n                        {!is_authenticated ? <Redirect to=\"/login\" /> :\n                            <Home users={users} images={images} />}\n                    </Route>\n                    <Route path=\"/signup\">\n                        {!is_new ? <Redirect to=\"/login\" /> :\n                            <Signup username={username} password={password}\n                                text_input_change={this.text_input_change}\n                                signup={this.signup} />}\n                    </Route>\n                    <Route path=\"/repo\">\n                        {!is_authenticated ? <Redirect to=\"/login\" /> : <ImageList user={users[current_user]} images={images[current_user]} />}\n                    </Route>\n                    <Route path=\"/image/:userId/:imageId\">\n                        {!is_authenticated ? <Redirect to=\"/login\" /> :\n                            <Image users={users} images={images} cur_user={current_user}\n                                delete_image={this.delete_an_image} />}\n                    </Route>\n                    <Route path=\"/upload\">\n                        {!is_authenticated ? <Redirect to=\"/login\" /> :\n                            <UploadImage type={type} image={image} title={title}\n                                text_input_change={this.text_input_change}\n                                upload_image={this.upload_image} />}\n                    </Route>\n                </Switch>\n            </div>\n        </div >\n    }\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter } from 'react-router-dom'\n\nimport App from './App'\n\nReactDOM.render(\n    <HashRouter>\n        <React.StrictMode>\n            <App />\n        </React.StrictMode>\n    </HashRouter>\n    ,\n    document.getElementById('root')\n)"],"sourceRoot":""}